{"version":3,"file":"codewithrajat-rm-ng-video-player.mjs","sources":["../../../projects/rm-ng-video-player/src/lib/components/video-progress/video-progress.component.ts","../../../projects/rm-ng-video-player/src/lib/rm-ng-video-player.ts","../../../projects/rm-ng-video-player/src/lib/services/video-player.service.ts","../../../projects/rm-ng-video-player/src/public-api.ts","../../../projects/rm-ng-video-player/src/codewithrajat-rm-ng-video-player.ts"],"sourcesContent":["import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  ViewChild,\n  ChangeDetectionStrategy,\n  signal,\n  computed,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'rm-video-progress',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <div class=\"rm-video-progress\">\n      <div\n        #progressBar\n        class=\"rm-video-progress__bar\"\n        (click)=\"onProgressClick($event)\"\n        (mousedown)=\"onMouseDown($event)\"\n        (mousemove)=\"onMouseMove($event)\"\n        (mouseleave)=\"onMouseLeave()\"\n        [attr.aria-label]=\"'Seek to ' + formatTime(hoverTime())\"\n      >\n        <!-- Buffered progress -->\n        @if (buffered && duration > 0) {\n          @for (range of bufferedRanges(); track $index) {\n            <div\n              class=\"rm-video-progress__buffered\"\n              [style.left.%]=\"(range.start / duration) * 100\"\n              [style.width.%]=\"((range.end - range.start) / duration) * 100\"\n            ></div>\n          }\n        }\n\n        <!-- Played progress -->\n        <div class=\"rm-video-progress__played\" [style.width.%]=\"progressPercentage()\"></div>\n\n        <!-- Hover preview -->\n        @if (isHovering()) {\n          <div class=\"rm-video-progress__hover-preview\" [style.left.%]=\"hoverPercentage()\">\n            <div class=\"rm-video-progress__hover-time\">\n              {{ formatTime(hoverTime()) }}\n            </div>\n          </div>\n        }\n\n        <!-- Scrubber -->\n        <div\n          class=\"rm-video-progress__scrubber\"\n          [style.left.%]=\"progressPercentage()\"\n          [class.rm-video-progress__scrubber--dragging]=\"isDragging()\"\n        ></div>\n      </div>\n    </div>\n  `,\n  styles: `\n    .rm-video-progress {\n      position: relative;\n      width: 100%;\n      height: 24px;\n      display: flex;\n      align-items: center;\n      cursor: pointer;\n      padding: 10px 0;\n    }\n\n    .rm-video-progress__bar {\n      position: relative;\n      width: 100%;\n      height: 3px;\n      background: rgba(255, 255, 255, 0.15);\n      backdrop-filter: blur(10px);\n      -webkit-backdrop-filter: blur(10px);\n      border-radius: 2px;\n      overflow: hidden;\n      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n    }\n\n    .rm-video-progress:hover .rm-video-progress__bar {\n      height: 5px;\n      background: rgba(255, 255, 255, 0.25);\n    }\n\n    .rm-video-progress__buffered {\n      position: absolute;\n      top: 0;\n      height: 100%;\n      background: rgba(255, 255, 255, 0.3);\n      border-radius: 2px;\n      transition: background 0.3s ease;\n    }\n\n    .rm-video-progress__played {\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 100%;\n      background: linear-gradient(90deg, #ffffff 0%, rgba(255, 255, 255, 0.8) 100%);\n      border-radius: 2px;\n      transition: width 0.1s ease;\n      box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);\n    }\n\n    .rm-video-progress__scrubber {\n      position: absolute;\n      top: 50%;\n      width: 14px;\n      height: 14px;\n      background: #ffffff;\n      backdrop-filter: blur(10px) saturate(180%);\n      -webkit-backdrop-filter: blur(10px) saturate(180%);\n      border: 2px solid rgba(255, 255, 255, 0.8);\n      border-radius: 50%;\n      transform: translateX(-50%) translateY(-50%);\n      opacity: 0;\n      transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      box-shadow:\n        0 4px 12px rgba(0, 0, 0, 0.3),\n        inset 0 1px 0 rgba(255, 255, 255, 0.5);\n      cursor: grab;\n    }\n\n    .rm-video-progress:hover .rm-video-progress__scrubber,\n    .rm-video-progress__scrubber--dragging {\n      opacity: 1;\n    }\n\n    .rm-video-progress__scrubber--dragging {\n      transform: translateX(-50%) translateY(-50%) scale(1.2);\n      cursor: grabbing;\n      box-shadow:\n        0 6px 20px rgba(0, 0, 0, 0.4),\n        inset 0 1px 0 rgba(255, 255, 255, 0.6);\n    }\n\n    .rm-video-progress__hover-preview {\n      position: absolute;\n      bottom: 100%;\n      transform: translateX(-50%);\n      margin-bottom: 8px;\n      pointer-events: none;\n    }\n\n    .rm-video-progress__hover-time {\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      font-weight: 500;\n      white-space: nowrap;\n    }\n\n    .rm-video-progress__hover-time::after {\n      content: '';\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 0;\n      height: 0;\n      border-left: 4px solid transparent;\n      border-right: 4px solid transparent;\n      border-top: 4px solid rgba(0, 0, 0, 0.8);\n    }\n\n    @media (max-width: 480px) {\n      .rm-video-progress {\n        height: 24px;\n      }\n\n      .rm-video-progress__bar {\n        height: 6px;\n      }\n\n      .rm-video-progress:hover .rm-video-progress__bar {\n        height: 8px;\n      }\n\n      .rm-video-progress__scrubber {\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    /* Touch devices */\n    @media (pointer: coarse) {\n      .rm-video-progress {\n        height: 28px;\n      }\n\n      .rm-video-progress__bar {\n        height: 8px;\n      }\n\n      .rm-video-progress__scrubber {\n        width: 18px;\n        height: 18px;\n        opacity: 1;\n      }\n    }\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class VideoProgressComponent {\n  @ViewChild('progressBar', { static: true }) progressBar!: ElementRef<HTMLDivElement>;\n\n  @Input() currentTime = 0;\n  @Input() duration = 0;\n  @Input() buffered: TimeRanges | null = null;\n\n  @Output() seek = new EventEmitter<number>();\n\n  // Signals\n  isDragging = signal(false);\n  isHovering = signal(false);\n  hoverX = signal(0);\n\n  // Computed signals\n  progressPercentage = computed(() => {\n    if (this.duration <= 0) return 0;\n    return (this.currentTime / this.duration) * 100;\n  });\n\n  hoverPercentage = computed(() => {\n    if (!this.progressBar) return 0;\n    const rect = this.progressBar.nativeElement.getBoundingClientRect();\n    return (this.hoverX() / rect.width) * 100;\n  });\n\n  hoverTime = computed(() => {\n    const percentage = this.hoverPercentage();\n    return (percentage / 100) * this.duration;\n  });\n\n  bufferedRanges = computed(() => {\n    if (!this.buffered || this.duration <= 0) return [];\n\n    const ranges = [];\n    for (let i = 0; i < this.buffered.length; i++) {\n      ranges.push({\n        start: this.buffered.start(i),\n        end: this.buffered.end(i),\n      });\n    }\n    return ranges;\n  });\n\n  onProgressClick(event: MouseEvent): void {\n    if (this.isDragging()) return;\n\n    const seekTime = this.getSeekTimeFromEvent(event);\n    this.seek.emit(seekTime);\n  }\n\n  onMouseDown(event: MouseEvent): void {\n    event.preventDefault();\n    this.isDragging.set(true);\n\n    const seekTime = this.getSeekTimeFromEvent(event);\n    this.seek.emit(seekTime);\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const seekTime = this.getSeekTimeFromEvent(e);\n      this.seek.emit(seekTime);\n    };\n\n    const handleMouseUp = () => {\n      this.isDragging.set(false);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }\n\n  onMouseMove(event: MouseEvent): void {\n    if (this.isDragging()) return;\n\n    this.isHovering.set(true);\n    const rect = this.progressBar.nativeElement.getBoundingClientRect();\n    this.hoverX.set(event.clientX - rect.left);\n  }\n\n  onMouseLeave(): void {\n    this.isHovering.set(false);\n  }\n\n  private getSeekTimeFromEvent(event: MouseEvent): number {\n    const rect = this.progressBar.nativeElement.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const percentage = Math.max(0, Math.min(1, x / rect.width));\n    return percentage * this.duration;\n  }\n\n  formatTime(seconds: number): string {\n    if (isNaN(seconds) || seconds < 0) return '0:00';\n\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  HostListener,\n  signal,\n  computed,\n  effect,\n  inject,\n  DestroyRef,\n  ChangeDetectionStrategy,\n} from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { CommonModule } from '@angular/common';\nimport { fromEvent, merge } from 'rxjs';\nimport { throttleTime } from 'rxjs/operators';\nimport {\n  VideoPlayerConfig,\n  VideoPlayerState,\n  VideoSource,\n  VideoPlayerEvent,\n} from './interfaces/video-player.interface';\nimport { VideoProgressComponent } from './components/video-progress/video-progress.component';\n\n@Component({\n  selector: 'rm-ng-video-player',\n  standalone: true,\n  imports: [CommonModule, VideoProgressComponent],\n  template: `\n    <div\n      class=\"rm-video-player\"\n      [class.rm-video-player--fullscreen]=\"isFullscreen()\"\n      [class.rm-video-player--loading]=\"isLoading()\"\n      [class.rm-video-player--error]=\"hasError()\"\n      [class.rm-video-player--controls-visible]=\"showControls()\"\n      [class.rm-video-player--playing]=\"isPlaying()\"\n      (mouseenter)=\"onMouseEnter()\"\n      (mouseleave)=\"onMouseLeave()\"\n    >\n      <!-- Apple-style center play button -->\n      @if (!isLoading() && !hasError() && !isPlaying()) {\n        <div class=\"rm-video-player__center-play\" (click)=\"togglePlayPause()\">\n          <svg width=\"24\" height=\"28\" viewBox=\"0 0 24 28\" fill=\"none\">\n            <path d=\"M2 2L22 14L2 26V2Z\" fill=\"currentColor\" />\n          </svg>\n        </div>\n      }\n\n      <video\n        #videoElement\n        class=\"rm-video-player__video\"\n        [src]=\"currentSource()?.url\"\n        [poster]=\"config().poster\"\n        [muted]=\"isMuted()\"\n        [loop]=\"loopEnabled()\"\n        [autoplay]=\"config().autoplay\"\n        [attr.playsinline]=\"config().playsinline\"\n        [preload]=\"config().preload\"\n        (loadstart)=\"onLoadStart()\"\n        (loadedmetadata)=\"onLoadedMetadata()\"\n        (loadeddata)=\"onLoadedData()\"\n        (canplay)=\"onCanPlay()\"\n        (canplaythrough)=\"onCanPlayThrough()\"\n        (play)=\"onPlay()\"\n        (pause)=\"onPause()\"\n        (ended)=\"onEnded()\"\n        (timeupdate)=\"onTimeUpdate()\"\n        (progress)=\"onProgress()\"\n        (volumechange)=\"onVolumeChange()\"\n        (error)=\"onError($event)\"\n        (click)=\"togglePlayPause()\"\n      >\n        @if (sources().length > 0) {\n          @for (source of sources(); track source.url) {\n            <source [src]=\"source.url\" [type]=\"source.type\" />\n          }\n        }\n\n        @if (config().tracks && config().tracks!.length > 0) {\n          @for (track of config().tracks!; track track.src) {\n            <track\n              [src]=\"track.src\"\n              [kind]=\"track.kind\"\n              [srclang]=\"track.srclang\"\n              [label]=\"track.label\"\n              [default]=\"track.default\"\n            />\n          }\n        }\n\n        Your browser does not support the video tag.\n      </video>\n\n      @if (isLoading()) {\n        <div class=\"rm-video-player__loading\">\n          <div class=\"rm-video-player__spinner\"></div>\n          <span>Loading...</span>\n        </div>\n      }\n\n      @if (hasError()) {\n        <div class=\"rm-video-player__error\">\n          <div class=\"rm-video-player__error-icon\">âš </div>\n          <div class=\"rm-video-player__error-message\">\n            {{ errorMessage() }}\n          </div>\n          @if (config().showRetryButton) {\n            <button class=\"rm-video-player__retry-button\" (click)=\"retry()\">Retry</button>\n          }\n        </div>\n      }\n\n      @if (showControls() && !hasError()) {\n        <div class=\"rm-video-player__controls\">\n          <!-- Progress Bar (YouTube sequence 1) -->\n          <rm-video-progress\n            [currentTime]=\"currentTime()\"\n            [duration]=\"duration()\"\n            [buffered]=\"bufferedRanges()\"\n            (seek)=\"seek($event)\"\n          >\n          </rm-video-progress>\n\n          <div class=\"rm-video-player__controls-bottom\">\n            <!-- Left Controls Group (YouTube sequence 2) -->\n            <div class=\"rm-video-player__controls-left\">\n              <!-- Play/Pause Button -->\n              <button\n                class=\"rm-control-btn rm-control-btn--play-pause\"\n                (click)=\"togglePlayPause()\"\n                [attr.data-tooltip]=\"isPlaying() ? 'Pause (Space)' : 'Play (Space)'\"\n              >\n                <svg\n                  *ngIf=\"!isPlaying()\"\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"currentColor\"\n                >\n                  <path d=\"M8 5v14l11-7z\" />\n                </svg>\n                <svg\n                  *ngIf=\"isPlaying()\"\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"currentColor\"\n                >\n                  <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\" />\n                </svg>\n              </button>\n\n              <!-- Skip Backward 10s -->\n              <button\n                class=\"rm-control-btn rm-control-btn--skip rm-control-btn--skip-back\"\n                (click)=\"skipBackward()\"\n                data-tooltip=\"Skip backward 10s (J)\"\n              >\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <!-- Curved arrow pointing left with replay symbol -->\n                  <path\n                    d=\"M12,5V1L7,6l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6H4c0,4.42,3.58,8,8,8s8-3.58,8-8S16.42,5,12,5z\"\n                  />\n                  <!-- Double left arrows -->\n                  <path d=\"M11 18V6l-2.5 6L11 18zm-4 0V6l-2.5 6L7 18z\" />\n                </svg>\n              </button>\n\n              <!-- Skip Forward 10s -->\n              <button\n                class=\"rm-control-btn rm-control-btn--skip rm-control-btn--skip-forward\"\n                (click)=\"skipForward()\"\n                data-tooltip=\"Skip forward 10s (L)\"\n              >\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <!-- Curved arrow pointing right with forward symbol -->\n                  <path\n                    d=\"M12,5V1l5,5l-5,5V7c-3.31,0-6,2.69-6,6s2.69,6,6,6s6-2.69,6-6h2c0,4.42-3.58,8-8,8s-8-3.58-8-8S7.58,5,12,5z\"\n                  />\n                  <!-- Double right arrows -->\n                  <path d=\"M13 6v12l2.5-6L13 6zm4 0v12l2.5-6L17 6z\" />\n                </svg>\n              </button>\n\n              <!-- Volume Controls -->\n              <div\n                class=\"rm-volume-container\"\n                (mouseenter)=\"showVolumeSlider.set(true)\"\n                (mouseleave)=\"showVolumeSlider.set(false)\"\n              >\n                <button\n                  class=\"rm-control-btn rm-control-btn--volume\"\n                  (click)=\"toggleMute()\"\n                  [attr.data-tooltip]=\"isMuted() ? 'Unmute (M)' : 'Mute (M)'\"\n                >\n                  <svg\n                    *ngIf=\"!isMuted() && volume() > 0.5\"\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"\n                    />\n                  </svg>\n                  <svg\n                    *ngIf=\"!isMuted() && volume() <= 0.5 && volume() > 0\"\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"\n                    />\n                  </svg>\n                  <svg\n                    *ngIf=\"isMuted() || volume() === 0\"\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"\n                    />\n                  </svg>\n                </button>\n                <div\n                  class=\"rm-volume-slider-container\"\n                  [class.rm-volume-slider-container--visible]=\"showVolumeSlider()\"\n                >\n                  <input\n                    type=\"range\"\n                    class=\"rm-volume-slider\"\n                    min=\"0\"\n                    max=\"1\"\n                    step=\"0.01\"\n                    [value]=\"volume()\"\n                    (input)=\"setVolume(+$any($event.target).value)\"\n                  />\n                </div>\n              </div>\n\n              <!-- Time Display -->\n              <div class=\"rm-time-display\">\n                <span class=\"rm-time-current\">{{ formatTime(currentTime()) }}</span>\n                <span class=\"rm-time-separator\">/</span>\n                <span class=\"rm-time-duration\">{{ formatTime(duration()) }}</span>\n              </div>\n            </div>\n\n            <!-- Right Controls Group (YouTube sequence 3) -->\n            <div class=\"rm-video-player__controls-right\">\n              <!-- Captions/Subtitles Button -->\n              <button\n                class=\"rm-control-btn rm-control-btn--captions\"\n                [class.rm-control-btn--active]=\"showCaptions()\"\n                (click)=\"toggleCaptions()\"\n                [attr.data-tooltip]=\"\n                  showCaptions() ? 'Turn off captions (C)' : 'Turn on captions (C)'\n                \"\n              >\n                @if (showCaptions()) {\n                  <!-- Captions ON - solid filled background -->\n                  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" ry=\"2\" fill=\"currentColor\" />\n                    <text\n                      x=\"12\"\n                      y=\"14.5\"\n                      text-anchor=\"middle\"\n                      font-size=\"8\"\n                      font-weight=\"bold\"\n                      fill=\"#000\"\n                    >\n                      CC\n                    </text>\n                  </svg>\n                } @else {\n                  <!-- Captions OFF - outline only -->\n                  <svg\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    stroke-width=\"1.5\"\n                  >\n                    <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" ry=\"2\" />\n                    <text\n                      x=\"12\"\n                      y=\"14.5\"\n                      text-anchor=\"middle\"\n                      font-size=\"8\"\n                      font-weight=\"bold\"\n                      fill=\"currentColor\"\n                    >\n                      CC\n                    </text>\n                  </svg>\n                }\n              </button>\n\n              <!-- Settings/Quality Button -->\n              <div class=\"rm-settings-container\" (clickOutside)=\"closeSettings()\">\n                <button\n                  class=\"rm-control-btn rm-control-btn--settings\"\n                  [class.rm-control-btn--active]=\"showSettingsMenu()\"\n                  (click)=\"toggleSettings()\"\n                  data-tooltip=\"Settings\"\n                >\n                  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path\n                      d=\"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\"\n                    />\n                  </svg>\n                </button>\n\n                <!-- Settings Menu -->\n                @if (showSettingsMenu()) {\n                  <div class=\"rm-settings-menu\">\n                    <!-- Main Menu -->\n                    @if (!currentSettingsPanel()) {\n                      <div class=\"rm-settings-item\" (click)=\"openSettingsPanel('speed')\">\n                        <span>Playback speed</span>\n                        <div class=\"rm-settings-value\">{{ getSpeedLabel() }}</div>\n                        <svg class=\"rm-settings-arrow\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                          <path\n                            d=\"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z\"\n                            fill=\"currentColor\"\n                          />\n                        </svg>\n                      </div>\n                      <div class=\"rm-settings-item\" (click)=\"openSettingsPanel('quality')\">\n                        <span>Quality</span>\n                        <div class=\"rm-settings-value\">{{ getQualityLabel() }}</div>\n                        <svg class=\"rm-settings-arrow\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                          <path\n                            d=\"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z\"\n                            fill=\"currentColor\"\n                          />\n                        </svg>\n                      </div>\n                      <div class=\"rm-settings-item\" (click)=\"openSettingsPanel('sleep')\">\n                        <span>Sleep timer</span>\n                        <div class=\"rm-settings-value\">{{ getSleepTimerLabel() }}</div>\n                        <svg class=\"rm-settings-arrow\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                          <path\n                            d=\"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12l-4.58 4.59z\"\n                            fill=\"currentColor\"\n                          />\n                        </svg>\n                      </div>\n                      <div class=\"rm-settings-item\" (click)=\"toggleLoop()\">\n                        <span>Loop</span>\n                        <div class=\"rm-settings-value\">{{ loopEnabled() ? 'On' : 'Off' }}</div>\n                      </div>\n                    }\n\n                    <!-- Speed Panel -->\n                    @if (currentSettingsPanel() === 'speed') {\n                      <div class=\"rm-settings-header\">\n                        <button class=\"rm-settings-back\" (click)=\"closeSettingsPanel()\">\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                            <path\n                              d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\"\n                              fill=\"currentColor\"\n                            />\n                          </svg>\n                        </button>\n                        <span>Playback speed</span>\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 0.25\"\n                        (click)=\"setPlaybackSpeed(0.25)\"\n                      >\n                        0.25\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 0.5\"\n                        (click)=\"setPlaybackSpeed(0.5)\"\n                      >\n                        0.5\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 0.75\"\n                        (click)=\"setPlaybackSpeed(0.75)\"\n                      >\n                        0.75\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 1\"\n                        (click)=\"setPlaybackSpeed(1)\"\n                      >\n                        Normal\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 1.25\"\n                        (click)=\"setPlaybackSpeed(1.25)\"\n                      >\n                        1.25\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 1.5\"\n                        (click)=\"setPlaybackSpeed(1.5)\"\n                      >\n                        1.5\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"playbackSpeed() === 2\"\n                        (click)=\"setPlaybackSpeed(2)\"\n                      >\n                        2\n                      </div>\n                    }\n\n                    <!-- Quality Panel -->\n                    @if (currentSettingsPanel() === 'quality') {\n                      <div class=\"rm-settings-header\">\n                        <button class=\"rm-settings-back\" (click)=\"closeSettingsPanel()\">\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                            <path\n                              d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\"\n                              fill=\"currentColor\"\n                            />\n                          </svg>\n                        </button>\n                        <span>Quality</span>\n                      </div>\n                      <!-- Auto quality option -->\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"currentQuality() === 'auto'\"\n                        (click)=\"changeQuality('auto')\"\n                      >\n                        Auto\n                      </div>\n\n                      <!-- Dynamic quality options based on video sources -->\n                      @for (source of sources(); track source.url) {\n                        @if (source.label) {\n                          <div\n                            class=\"rm-settings-option\"\n                            [class.rm-settings-option--active]=\"currentSource()?.url === source.url\"\n                            (click)=\"changeVideoSource(source)\"\n                          >\n                            {{ source.label }}\n                          </div>\n                        }\n                      }\n                    }\n\n                    <!-- Sleep Timer Panel -->\n                    @if (currentSettingsPanel() === 'sleep') {\n                      <div class=\"rm-settings-header\">\n                        <button class=\"rm-settings-back\" (click)=\"closeSettingsPanel()\">\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\">\n                            <path\n                              d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\"\n                              fill=\"currentColor\"\n                            />\n                          </svg>\n                        </button>\n                        <span>Sleep timer</span>\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"!sleepTimerActive()\"\n                        (click)=\"setSleepTimer(null)\"\n                      >\n                        Off\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"sleepTimer() === 15\"\n                        (click)=\"setSleepTimer(15)\"\n                      >\n                        15 minutes\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"sleepTimer() === 30\"\n                        (click)=\"setSleepTimer(30)\"\n                      >\n                        30 minutes\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"sleepTimer() === 60\"\n                        (click)=\"setSleepTimer(60)\"\n                      >\n                        1 hour\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"sleepTimer() === 90\"\n                        (click)=\"setSleepTimer(90)\"\n                      >\n                        1.5 hours\n                      </div>\n                      <div\n                        class=\"rm-settings-option\"\n                        [class.rm-settings-option--active]=\"sleepTimer() === 120\"\n                        (click)=\"setSleepTimer(120)\"\n                      >\n                        2 hours\n                      </div>\n                    }\n                  </div>\n                }\n              </div>\n\n              <!-- Picture-in-Picture Button -->\n              <button\n                class=\"rm-control-btn rm-control-btn--pip\"\n                (click)=\"togglePictureInPicture()\"\n                data-tooltip=\"Picture-in-picture (I)\"\n              >\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path\n                    d=\"M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z\"\n                  />\n                </svg>\n              </button>\n\n              <!-- Fullscreen Button -->\n              <button\n                class=\"rm-control-btn rm-control-btn--fullscreen\"\n                (click)=\"toggleFullscreen()\"\n                [attr.data-tooltip]=\"isFullscreen() ? 'Exit fullscreen (F)' : 'Fullscreen (F)'\"\n              >\n                <svg\n                  *ngIf=\"!isFullscreen()\"\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n                  />\n                </svg>\n                <svg\n                  *ngIf=\"isFullscreen()\"\n                  width=\"20\"\n                  height=\"20\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"currentColor\"\n                >\n                  <path\n                    d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n                  />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  `,\n  styles: `\n    .rm-video-player {\n      position: relative;\n      display: inline-block;\n      width: 100%;\n      max-width: 100%;\n      background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(20, 20, 20, 0.98) 100%);\n      backdrop-filter: blur(60px) saturate(180%);\n      -webkit-backdrop-filter: blur(60px) saturate(180%);\n      font-family:\n        -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', sans-serif;\n      user-select: none;\n      overflow: hidden;\n      border-radius: 20px;\n      border: 0.5px solid rgba(255, 255, 255, 0.08);\n      box-shadow:\n        0 32px 64px rgba(0, 0, 0, 0.6),\n        0 0 0 0.5px rgba(255, 255, 255, 0.05),\n        inset 0 1px 1px rgba(255, 255, 255, 0.1),\n        inset 0 0 60px rgba(255, 255, 255, 0.02);\n      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n      cursor: pointer;\n    }\n\n    .rm-video-player::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background:\n        radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.03) 0%, transparent 70%),\n        radial-gradient(circle at 70% 70%, rgba(120, 119, 198, 0.02) 0%, transparent 70%);\n      border-radius: 20px;\n      pointer-events: none;\n    }\n\n    .rm-video-player:hover {\n      border-color: rgba(255, 255, 255, 0.12);\n    }\n\n    .rm-video-player__video {\n      width: 100%;\n      height: auto;\n      display: block;\n      outline: none;\n      border-radius: 20px;\n      transition: filter 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n    }\n\n    .rm-video-player--loading .rm-video-player__video {\n      filter: brightness(0.8) blur(0.5px);\n    }\n\n    /* Apple-style center play button */\n    .rm-video-player__center-play {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 80px;\n      height: 80px;\n      background: radial-gradient(circle, rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.75) 100%);\n      backdrop-filter: blur(40px) saturate(200%);\n      -webkit-backdrop-filter: blur(40px) saturate(200%);\n      border: 0.5px solid rgba(255, 255, 255, 0.18);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      opacity: 0;\n      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n      z-index: 5;\n      box-shadow:\n        0 20px 40px rgba(0, 0, 0, 0.4),\n        inset 0 1px 1px rgba(255, 255, 255, 0.2),\n        inset 0 0 20px rgba(255, 255, 255, 0.05);\n    }\n\n    .rm-video-player:not(.rm-video-player--playing):hover .rm-video-player__center-play {\n      opacity: 1;\n    }\n\n    .rm-video-player__center-play svg {\n      width: 28px;\n      height: 28px;\n      fill: rgba(255, 255, 255, 0.95);\n      margin-left: 4px;\n      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.4));\n      transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n    }\n\n    .rm-video-player__center-play:hover {\n      transform: translate(-50%, -50%) scale(1.08);\n      background: radial-gradient(circle, rgba(0, 0, 0, 0.95) 0%, rgba(0, 0, 0, 0.85) 100%);\n      box-shadow:\n        0 30px 60px rgba(0, 0, 0, 0.6),\n        inset 0 1px 2px rgba(255, 255, 255, 0.3),\n        inset 0 0 30px rgba(255, 255, 255, 0.08);\n    }\n\n    .rm-video-player__center-play:active {\n      transform: translate(-50%, -50%) scale(1.02);\n      transition: all 0.15s ease;\n    }\n\n    .rm-video-player--fullscreen {\n      position: fixed !important;\n      top: 0;\n      left: 0;\n      width: 100vw !important;\n      height: 100vh !important;\n      z-index: 9999;\n      border-radius: 0;\n      box-shadow: none;\n      transform: none;\n    }\n\n    .rm-video-player--fullscreen .rm-video-player__video {\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: 0;\n    }\n\n    .rm-video-player__loading,\n    .rm-video-player__error {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 24px;\n      color: rgba(255, 255, 255, 0.95);\n      z-index: 10;\n      text-align: center;\n      background: linear-gradient(145deg, rgba(0, 0, 0, 0.75) 0%, rgba(0, 0, 0, 0.65) 100%);\n      backdrop-filter: blur(60px) saturate(200%);\n      -webkit-backdrop-filter: blur(60px) saturate(200%);\n      border: 0.5px solid rgba(255, 255, 255, 0.15);\n      border-radius: 24px;\n      padding: 32px 40px;\n      box-shadow:\n        0 20px 40px rgba(0, 0, 0, 0.5),\n        inset 0 1px 1px rgba(255, 255, 255, 0.2);\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n    }\n\n    .rm-video-player__spinner {\n      width: 52px;\n      height: 52px;\n      border: 2.5px solid rgba(255, 255, 255, 0.12);\n      border-top: 2.5px solid rgba(255, 255, 255, 0.85);\n      border-radius: 50%;\n      animation: spin 1.4s cubic-bezier(0.23, 1, 0.32, 1) infinite;\n      filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));\n    }\n\n    @keyframes spin {\n      0% {\n        transform: rotate(0deg);\n      }\n      100% {\n        transform: rotate(360deg);\n      }\n    }\n\n    .rm-video-player__error-icon {\n      font-size: 56px;\n      background: linear-gradient(145deg, #ff6b6b 0%, #ff8e8e 100%);\n      -webkit-background-clip: text;\n      background-clip: text;\n      -webkit-text-fill-color: transparent;\n      filter: drop-shadow(0 4px 16px rgba(255, 107, 107, 0.4));\n      text-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);\n    }\n\n    .rm-video-player__error-message {\n      font-size: 17px;\n      font-weight: 500;\n      text-align: center;\n      max-width: 280px;\n      line-height: 1.45;\n      color: rgba(255, 255, 255, 0.92);\n      letter-spacing: -0.01em;\n    }\n\n    .rm-video-player__loading span {\n      font-size: 17px;\n      font-weight: 500;\n      letter-spacing: -0.01em;\n      color: rgba(255, 255, 255, 0.92);\n    }\n\n    .rm-video-player__retry-button {\n      padding: 14px 28px;\n      background: linear-gradient(\n        145deg,\n        rgba(255, 255, 255, 0.1) 0%,\n        rgba(255, 255, 255, 0.06) 100%\n      );\n      backdrop-filter: blur(30px) saturate(200%);\n      -webkit-backdrop-filter: blur(30px) saturate(200%);\n      border: 0.5px solid rgba(255, 255, 255, 0.18);\n      color: rgba(255, 255, 255, 0.95);\n      border-radius: 16px;\n      cursor: pointer;\n      font-weight: 600;\n      font-size: 16px;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      letter-spacing: -0.01em;\n      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n      position: relative;\n      overflow: hidden;\n      box-shadow:\n        0 8px 20px rgba(0, 0, 0, 0.3),\n        inset 0 1px 1px rgba(255, 255, 255, 0.2);\n      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    }\n\n    .rm-video-player__retry-button:hover {\n      background: linear-gradient(\n        145deg,\n        rgba(255, 255, 255, 0.15) 0%,\n        rgba(255, 255, 255, 0.08) 100%\n      );\n      border-color: rgba(255, 255, 255, 0.25);\n      transform: translateY(-3px);\n      box-shadow:\n        0 16px 40px rgba(0, 0, 0, 0.4),\n        inset 0 1px 2px rgba(255, 255, 255, 0.3);\n    }\n\n    .rm-video-player__retry-button:active {\n      transform: translateY(-1px);\n      transition: all 0.15s ease;\n    }\n\n    .rm-video-player__controls {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      background: transparent;\n      padding: 0px 8px 2px;\n      opacity: 0;\n      transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n      pointer-events: none;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      line-height: 1;\n    }\n\n    .rm-video-player--controls-visible .rm-video-player__controls {\n      opacity: 1;\n      pointer-events: all;\n    }\n\n    .rm-video-player__controls-bottom {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      gap: 4px;\n      margin-top: 0;\n      margin-bottom: 0;\n      background: transparent !important;\n      backdrop-filter: none !important;\n      -webkit-backdrop-filter: none !important;\n      line-height: 1;\n    }\n\n    .rm-video-player__controls-left,\n    .rm-video-player__controls-right {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      background: transparent !important;\n      backdrop-filter: none !important;\n      -webkit-backdrop-filter: none !important;\n    }\n\n    /* YouTube-style Control Buttons - Clean Design */\n    .rm-control-btn {\n      position: relative;\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: transparent !important;\n      border: none !important;\n      border-radius: 0;\n      color: rgba(255, 255, 255, 0.92);\n      cursor: pointer;\n      transition: transform 0.2s cubic-bezier(0.23, 1, 0.32, 1);\n      overflow: visible;\n      font-size: 0;\n      backdrop-filter: none !important;\n      -webkit-backdrop-filter: none !important;\n      box-shadow: none !important;\n      margin: 0;\n      padding: 0;\n      line-height: 1;\n    }\n\n    .rm-control-btn::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.1);\n      border-radius: 8px;\n      pointer-events: none;\n      opacity: 0;\n      transition: opacity 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n    }\n\n    .rm-control-btn:hover {\n      background: transparent;\n      transform: scale(1.02);\n    }\n\n    .rm-control-btn:hover::before {\n      opacity: 1;\n    }\n\n    .rm-control-btn:active {\n      transform: scale(0.98);\n      transition: all 0.15s ease;\n    }\n\n    .rm-control-btn svg {\n      filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.4));\n      transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n    }\n\n    /* Play/Pause Button - Larger */\n    .rm-control-btn--play-pause {\n      width: 32px;\n      height: 32px;\n      background: transparent;\n      margin: 0;\n      padding: 0;\n      line-height: 1;\n    }\n\n    .rm-control-btn--play-pause:hover {\n      background: transparent;\n      transform: scale(1.05);\n    }\n\n    /* Skip Buttons with Counter */\n    .rm-control-btn--skip {\n      position: relative;\n      width: 30px;\n      height: 30px;\n      background: transparent;\n      margin: 0;\n      padding: 0;\n      line-height: 1;\n    }\n\n    .rm-control-btn--skip:hover {\n      background: transparent;\n      transform: scale(1.03);\n    }\n\n    .rm-control-btn--skip svg {\n      margin-top: -2px;\n      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));\n    }\n\n    .rm-control-btn--skip-back:hover {\n      background: transparent;\n    }\n\n    .rm-control-btn--skip-forward:hover {\n      background: transparent;\n    }\n    /* Volume Controls Container */\n    .rm-volume-container {\n      position: relative;\n      display: flex;\n      align-items: center;\n      gap: 2px;\n      background: transparent !important;\n      backdrop-filter: none !important;\n      -webkit-backdrop-filter: none !important;\n      overflow: visible;\n    }\n\n    .rm-volume-slider-container {\n      position: absolute;\n      left: 50%;\n      bottom: 52px;\n      transform: translateX(-50%) rotate(-90deg);\n      opacity: 0;\n      pointer-events: none;\n      transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);\n      background: transparent !important;\n      backdrop-filter: none !important;\n      -webkit-backdrop-filter: none !important;\n      z-index: 100;\n    }\n\n    .rm-volume-slider-container--visible {\n      opacity: 1;\n      pointer-events: all;\n    }\n\n    .rm-volume-slider {\n      width: 60px;\n      height: 4px;\n      -webkit-appearance: none;\n      background: rgba(0, 0, 0, 0.8);\n      border-radius: 3px;\n      outline: none;\n      cursor: pointer;\n      border: 1px solid rgba(255, 255, 255, 0.3);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);\n    }\n\n    .rm-volume-slider::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      width: 14px;\n      height: 14px;\n      background: rgba(255, 255, 255, 0.95);\n      border-radius: 50%;\n      cursor: pointer;\n      border: 2px solid rgba(0, 0, 0, 0.3);\n      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);\n      transition: all 0.2s cubic-bezier(0.23, 1, 0.32, 1);\n    }\n\n    .rm-volume-slider::-webkit-slider-thumb:hover {\n      transform: scale(1.05);\n      background: rgba(255, 255, 255, 1);\n    }\n\n    /* Time Display */\n    .rm-time-display {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n      margin-left: 4px;\n      color: rgba(255, 255, 255, 0.92);\n      font-size: 14px;\n      font-weight: 500;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      letter-spacing: 0.2px;\n      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);\n    }\n\n    .rm-time-separator {\n      opacity: 0.6;\n      margin: 0 2px;\n    }\n\n    /* Special button styling for specific controls */\n    .rm-control-btn--captions,\n    .rm-control-btn--settings {\n      opacity: 0.8;\n    }\n\n    .rm-control-btn--captions:hover,\n    .rm-control-btn--settings:hover {\n      opacity: 1;\n    }\n\n    .rm-control-btn--fullscreen {\n      background: transparent;\n    }\n\n    .rm-control-btn--fullscreen:hover {\n      background: transparent;\n    }\n\n    /* Settings Menu with Apple Glassmorphism */\n    .rm-settings-container {\n      position: relative;\n    }\n\n    /* Ensure settings menu stays within viewport on smaller screens */\n    @media (max-width: 320px) {\n      .rm-settings-menu {\n        right: -20px;\n        width: 180px;\n      }\n    }\n\n    @media (max-width: 280px) {\n      .rm-settings-menu {\n        right: -10px;\n        width: 160px;\n      }\n    }\n\n    .rm-control-btn--active {\n      background: rgba(0, 122, 255, 0.2) !important;\n      color: rgba(255, 255, 255, 0.98) !important;\n    }\n\n    /* Tooltip Styles */\n    .rm-control-btn[data-tooltip]:hover::after {\n      content: attr(data-tooltip);\n      position: absolute;\n      bottom: calc(100% + 8px);\n      left: 50%;\n      transform: translateX(-50%);\n      background: rgba(0, 0, 0, 0.95);\n      color: rgba(255, 255, 255, 0.98);\n      padding: 8px 12px;\n      border-radius: 8px;\n      font-size: 11px;\n      font-weight: 500;\n      white-space: nowrap;\n      z-index: 10000;\n      pointer-events: none;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      letter-spacing: -0.01em;\n      border: 0.5px solid rgba(255, 255, 255, 0.15);\n      box-shadow:\n        0 8px 32px rgba(0, 0, 0, 0.6),\n        0 2px 8px rgba(0, 0, 0, 0.4),\n        inset 0 1px 1px rgba(255, 255, 255, 0.15);\n      animation: tooltipFadeIn 0.2s cubic-bezier(0.23, 1, 0.32, 1);\n      max-width: 200px;\n      text-align: center;\n    }\n\n    /* Position for custom tooltips */\n    .rm-control-btn[data-tooltip] {\n      position: relative;\n    }\n\n    /* Add padding for leftmost tooltips */\n    .rm-video-player__controls-left .rm-control-btn[data-tooltip]:hover::after {\n      margin-left: 15px;\n    }\n\n    /* Add padding for rightmost tooltips */\n    .rm-video-player__controls-right .rm-control-btn[data-tooltip]:hover::after {\n      margin-right: 15px;\n    }\n\n    .rm-control-btn[data-tooltip]:hover::before {\n      content: '';\n      position: absolute;\n      bottom: calc(100% + 2px);\n      left: 50%;\n      transform: translateX(-50%);\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid rgba(0, 0, 0, 0.95);\n      z-index: 10001;\n      pointer-events: none;\n    }\n\n    @keyframes tooltipFadeIn {\n      from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(-4px);\n      }\n      to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n      }\n    }\n\n    .rm-settings-menu {\n      position: absolute;\n      bottom: 40px;\n      right: -10px;\n      width: 200px;\n      max-width: calc(100vw - 20px);\n      max-height: 280px;\n      background: rgba(0, 0, 0, 0.9);\n      border-radius: 8px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);\n      overflow: hidden;\n      z-index: 1000;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      font-size: 14px;\n      color: white;\n    }\n\n    @keyframes settingsSlideIn {\n      0% {\n        opacity: 0;\n        transform: translateY(10px) scale(0.95);\n      }\n      100% {\n        opacity: 1;\n        transform: translateY(0) scale(1);\n      }\n    }\n\n    .rm-settings-item {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 12px 16px;\n      cursor: pointer;\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      transition: background-color 0.2s;\n    }\n\n    .rm-settings-item:hover {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n\n    .rm-settings-item:last-child {\n      border-bottom: none;\n    }\n\n    .rm-settings-value {\n      font-size: 13px;\n      color: rgba(255, 255, 255, 0.7);\n      margin-right: 8px;\n    }\n\n    .rm-settings-arrow {\n      width: 16px;\n      height: 16px;\n      opacity: 0.7;\n    }\n\n    .rm-settings-header {\n      display: flex;\n      align-items: center;\n      padding: 12px 16px;\n      border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n      font-weight: 500;\n    }\n\n    .rm-settings-back {\n      background: none;\n      border: none;\n      color: white;\n      cursor: pointer;\n      margin-right: 12px;\n      padding: 4px;\n      border-radius: 4px;\n      transition: background-color 0.2s;\n    }\n\n    .rm-settings-back:hover {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n\n    .rm-settings-back svg {\n      width: 16px;\n      height: 16px;\n    }\n\n    .rm-settings-option {\n      display: flex;\n      align-items: center;\n      padding: 10px 16px;\n      cursor: pointer;\n      transition: background-color 0.2s;\n      position: relative;\n    }\n\n    .rm-settings-option:hover {\n      background-color: rgba(255, 255, 255, 0.1);\n    }\n\n    .rm-settings-option--active {\n      background-color: rgba(255, 255, 255, 0.2);\n    }\n\n    .rm-settings-option--active::after {\n      content: 'âœ“';\n      position: absolute;\n      right: 16px;\n      font-size: 14px;\n      color: white;\n    }\n\n    /* Fullscreen enhancements */\n    .rm-video-player--fullscreen .rm-video-player__controls {\n      padding: 0px 16px 3px;\n      border-radius: 0;\n    }\n\n    /* Caption/Subtitle Styling */\n    video::cue {\n      background-color: rgba(0, 0, 0, 0.8);\n      color: white;\n      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;\n      font-size: 16px;\n      font-weight: 500;\n      line-height: 1.4;\n      padding: 4px 8px;\n      border-radius: 4px;\n      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);\n    }\n\n    .rm-video-player--fullscreen video::cue {\n      font-size: 20px;\n      padding: 6px 12px;\n    }\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RmNgVideoPlayerComponent implements OnInit, OnDestroy {\n  @ViewChild('videoElement', { static: true }) videoElement!: ElementRef<HTMLVideoElement>;\n\n  private destroyRef = inject(DestroyRef);\n\n  // Input signals\n  @Input() set videoConfig(config: Partial<VideoPlayerConfig>) {\n    this.config.set({ ...this.defaultConfig, ...config });\n  }\n\n  @Input() set videoSources(sources: VideoSource[]) {\n    this.sources.set(sources);\n    if (sources.length > 0) {\n      this.currentSource.set(sources[0]);\n    }\n  }\n\n  // Output events\n  @Output() playerEvent = new EventEmitter<VideoPlayerEvent>();\n  @Output() stateChange = new EventEmitter<VideoPlayerState>();\n\n  // Signals\n  config = signal<VideoPlayerConfig>(this.defaultConfig);\n  sources = signal<VideoSource[]>([]);\n  currentSource = signal<VideoSource | null>(null);\n\n  // Player state signals\n  isPlaying = signal(false);\n  isLoading = signal(false);\n  hasError = signal(false);\n  errorMessage = signal<string>('');\n  currentTime = signal(0);\n  duration = signal(0);\n  volume = signal(1);\n  isMuted = signal(false);\n  isFullscreen = signal(false);\n  bufferedRanges = signal<TimeRanges | null>(null);\n  playbackSpeed = signal(1);\n\n  // UI state signals\n  showControls = signal(true);\n  showVolumeSlider = signal(false);\n  showCaptions = signal(false);\n  showSettingsMenu = signal(false);\n  currentSettingsPanel = signal<string | null>(null);\n  currentQuality = signal('auto');\n  sleepTimer = signal<number | null>(null);\n  sleepTimerActive = signal(false);\n\n  loopEnabled = signal(false);\n  private controlsTimer: number | null = null;\n  private sleepTimerInstance: number | null = null;\n\n  // Computed signals\n  state = computed<VideoPlayerState>(() => ({\n    isPlaying: this.isPlaying(),\n    isLoading: this.isLoading(),\n    hasError: this.hasError(),\n    currentTime: this.currentTime(),\n    duration: this.duration(),\n    volume: this.volume(),\n    isMuted: this.isMuted(),\n    isFullscreen: this.isFullscreen(),\n    bufferedRanges: this.bufferedRanges(),\n  }));\n\n  private get defaultConfig(): VideoPlayerConfig {\n    return {\n      autoplay: false,\n      loop: false,\n      muted: false,\n      playsinline: true,\n      preload: 'metadata',\n      replayOnEnd: false,\n      showControls: true,\n      showFullscreenButton: true,\n      showVolumeButton: true,\n      showProgressBar: true,\n      showRetryButton: true,\n      hideControlsDelay: 3000,\n      seekStep: 10,\n      volumeStep: 0.1,\n    };\n  }\n\n  constructor(private elementRef: ElementRef) {\n    // Effect to emit state changes\n    effect(() => {\n      this.stateChange.emit(this.state());\n    });\n\n    // Effect to handle fullscreen changes\n    effect(() => {\n      if (this.isFullscreen()) {\n        document.body.style.overflow = 'hidden';\n      } else {\n        document.body.style.overflow = '';\n      }\n    });\n  }\n\n  @HostListener('document:click', ['$event'])\n  onDocumentClick(event: Event): void {\n    const target = event.target as Element;\n    const playerElement = this.elementRef.nativeElement;\n\n    if (playerElement && !playerElement.contains(target)) {\n      if (this.showSettingsMenu()) {\n        this.showSettingsMenu.set(false);\n        this.currentSettingsPanel.set(null);\n      }\n    }\n  }\n\n  ngOnInit(): void {\n    // Initialize signals from config\n    this.loopEnabled.set(this.config().loop);\n\n    this.setupEventListeners();\n    this.setupKeyboardShortcuts();\n  }\n\n  ngOnDestroy(): void {\n    if (this.controlsTimer) {\n      clearTimeout(this.controlsTimer);\n    }\n\n    if (this.sleepTimerInstance) {\n      clearTimeout(this.sleepTimerInstance);\n    }\n\n    // Cleanup fullscreen state\n    if (this.isFullscreen()) {\n      document.body.style.overflow = '';\n    }\n  }\n\n  private setupEventListeners(): void {\n    const video = this.videoElement.nativeElement;\n\n    // Fullscreen change events\n    merge(\n      fromEvent(document, 'fullscreenchange'),\n      fromEvent(document, 'webkitfullscreenchange'),\n      fromEvent(document, 'mozfullscreenchange'),\n      fromEvent(document, 'MSFullscreenChange')\n    )\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe(() => {\n        const isFullscreen = !!(\n          document.fullscreenElement ||\n          (document as any).webkitFullscreenElement ||\n          (document as any).mozFullScreenElement ||\n          (document as any).msFullscreenElement\n        );\n        this.isFullscreen.set(isFullscreen);\n      });\n\n    // Mouse movement for controls\n    fromEvent(video, 'mousemove')\n      .pipe(throttleTime(100), takeUntilDestroyed(this.destroyRef))\n      .subscribe(() => {\n        this.showControlsTemporarily();\n      });\n  }\n\n  private setupKeyboardShortcuts(): void {\n    fromEvent<KeyboardEvent>(document, 'keydown')\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe(event => {\n        // Skip if user is typing in an input field\n        if (this.isInputFocused()) return;\n\n        switch (event.code) {\n          case 'Space':\n            event.preventDefault();\n            this.togglePlayPause();\n            break;\n          case 'ArrowLeft':\n            event.preventDefault();\n            this.seek(this.currentTime() - this.config().seekStep);\n            break;\n          case 'ArrowRight':\n            event.preventDefault();\n            this.seek(this.currentTime() + this.config().seekStep);\n            break;\n          case 'ArrowUp':\n            event.preventDefault();\n            this.setVolume(Math.min(1, this.volume() + this.config().volumeStep));\n            break;\n          case 'ArrowDown':\n            event.preventDefault();\n            this.setVolume(Math.max(0, this.volume() - this.config().volumeStep));\n            break;\n          case 'KeyJ':\n            event.preventDefault();\n            this.seek(this.currentTime() - 10); // Skip backward 10s\n            break;\n          case 'KeyL':\n            event.preventDefault();\n            this.seek(this.currentTime() + 10); // Skip forward 10s\n            break;\n          case 'KeyM':\n            event.preventDefault();\n            this.toggleMute();\n            break;\n          case 'KeyC':\n            event.preventDefault();\n            this.toggleCaptions();\n            break;\n          case 'KeyI':\n            event.preventDefault();\n            this.togglePictureInPicture();\n            break;\n          case 'KeyF':\n            event.preventDefault();\n            this.toggleFullscreen();\n            break;\n        }\n      });\n  }\n\n  private isInputFocused(): boolean {\n    const activeElement = document.activeElement;\n    if (!activeElement) return false;\n\n    const tagName = activeElement.tagName.toLowerCase();\n    const inputTypes = ['input', 'textarea', 'select'];\n    const isContentEditable = activeElement.getAttribute('contenteditable') === 'true';\n\n    return inputTypes.includes(tagName) || isContentEditable;\n  }\n\n  // Video event handlers\n  onLoadStart(): void {\n    this.isLoading.set(true);\n    this.hasError.set(false);\n    this.emitEvent('loadstart');\n  }\n\n  onLoadedMetadata(): void {\n    const video = this.videoElement.nativeElement;\n    this.duration.set(video.duration);\n    this.initializeCaptions();\n    this.emitEvent('loadedmetadata');\n  }\n\n  onLoadedData(): void {\n    this.isLoading.set(false);\n    this.emitEvent('loadeddata');\n  }\n\n  onCanPlay(): void {\n    this.isLoading.set(false);\n    this.emitEvent('canplay');\n  }\n\n  onCanPlayThrough(): void {\n    this.emitEvent('canplaythrough');\n  }\n\n  onPlay(): void {\n    this.isPlaying.set(true);\n    this.emitEvent('play');\n  }\n\n  onPause(): void {\n    this.isPlaying.set(false);\n    this.emitEvent('pause');\n  }\n\n  onEnded(): void {\n    this.isPlaying.set(false);\n    this.emitEvent('ended');\n\n    // Check if loop is enabled and restart video manually as fallback\n    if (this.loopEnabled()) {\n      const video = this.videoElement.nativeElement;\n\n      // Reset video position immediately\n      video.currentTime = 0;\n\n      // Try to play the video\n      video\n        .play()\n        .then(() => {\n          this.isPlaying.set(true);\n        })\n        .catch(error => {\n          // Silently handle loop restart failure\n        });\n    } else if (this.config().replayOnEnd) {\n      // If replayOnEnd is enabled but loop is not, restart once\n      const video = this.videoElement.nativeElement;\n\n      // Reset video position immediately\n      video.currentTime = 0;\n\n      // Try to play the video once\n      video\n        .play()\n        .then(() => {\n          this.isPlaying.set(true);\n        })\n        .catch(error => {\n          // Silently handle replay failure\n        });\n    }\n  }\n\n  onTimeUpdate(): void {\n    const video = this.videoElement.nativeElement;\n    this.currentTime.set(video.currentTime);\n    this.emitEvent('timeupdate');\n  }\n\n  onProgress(): void {\n    const video = this.videoElement.nativeElement;\n    this.bufferedRanges.set(video.buffered);\n    this.emitEvent('progress');\n  }\n\n  onVolumeChange(): void {\n    const video = this.videoElement.nativeElement;\n    this.volume.set(video.volume);\n    this.isMuted.set(video.muted);\n    this.emitEvent('volumechange');\n  }\n\n  onError(event: ErrorEvent): void {\n    this.isLoading.set(false);\n    this.hasError.set(true);\n    this.errorMessage.set('Failed to load video. Please try again.');\n    this.emitEvent('error', { error: event });\n  }\n\n  // Control methods\n  togglePlayPause(): void {\n    const video = this.videoElement.nativeElement;\n    if (this.isPlaying()) {\n      video.pause();\n    } else {\n      video.play().catch(error => {\n        this.onError(error);\n      });\n    }\n    this.showControlsTemporarily();\n  }\n\n  seek(time: number): void {\n    const video = this.videoElement.nativeElement;\n    const clampedTime = Math.max(0, Math.min(time, this.duration()));\n    video.currentTime = clampedTime;\n    this.currentTime.set(clampedTime);\n    this.showControlsTemporarily();\n  }\n\n  setVolume(volume: number): void {\n    const video = this.videoElement.nativeElement;\n    const clampedVolume = Math.max(0, Math.min(1, volume));\n    video.volume = clampedVolume;\n    this.volume.set(clampedVolume);\n    if (clampedVolume > 0 && this.isMuted()) {\n      this.toggleMute();\n    }\n    this.showControlsTemporarily();\n  }\n\n  toggleMute(): void {\n    const video = this.videoElement.nativeElement;\n    video.muted = !video.muted;\n    this.isMuted.set(video.muted);\n    this.showControlsTemporarily();\n  }\n\n  toggleFullscreen(): void {\n    if (this.isFullscreen()) {\n      this.exitFullscreen();\n    } else {\n      this.enterFullscreen();\n    }\n  }\n\n  private enterFullscreen(): void {\n    const element = this.videoElement.nativeElement.parentElement;\n    if (!element) return;\n\n    if (element.requestFullscreen) {\n      element.requestFullscreen();\n    } else if ((element as any).webkitRequestFullscreen) {\n      (element as any).webkitRequestFullscreen();\n    } else if ((element as any).mozRequestFullScreen) {\n      (element as any).mozRequestFullScreen();\n    } else if ((element as any).msRequestFullscreen) {\n      (element as any).msRequestFullscreen();\n    }\n  }\n\n  private exitFullscreen(): void {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if ((document as any).webkitExitFullscreen) {\n      (document as any).webkitExitFullscreen();\n    } else if ((document as any).mozCancelFullScreen) {\n      (document as any).mozCancelFullScreen();\n    } else if ((document as any).msExitFullscreen) {\n      (document as any).msExitFullscreen();\n    }\n  }\n\n  retry(): void {\n    this.hasError.set(false);\n    this.errorMessage.set('');\n    const video = this.videoElement.nativeElement;\n    video.load();\n  }\n\n  // YouTube-style control methods\n  skipBackward(): void {\n    const video = this.videoElement.nativeElement;\n    const newTime = Math.max(0, this.currentTime() - 10);\n    video.currentTime = newTime;\n    this.currentTime.set(newTime);\n    this.showControlsTemporarily();\n  }\n\n  skipForward(): void {\n    const video = this.videoElement.nativeElement;\n    const newTime = Math.min(this.duration(), this.currentTime() + 10);\n    video.currentTime = newTime;\n    this.currentTime.set(newTime);\n    this.showControlsTemporarily();\n  }\n\n  private initializeCaptions(): void {\n    const video = this.videoElement.nativeElement;\n    const textTracks = video.textTracks;\n\n    // Only proceed if tracks are configured, to prevent errors when no captions are provided.\n    if (!this.config().tracks || this.config().tracks!.length === 0) {\n      return;\n    }\n\n    if (textTracks.length > 0) {\n      // Set all caption/subtitle tracks to hidden initially\n      for (let i = 0; i < textTracks.length; i++) {\n        const track = textTracks[i];\n        if (track.kind === 'captions' || track.kind === 'subtitles') {\n          track.mode = this.showCaptions() ? 'showing' : 'hidden';\n        }\n      }\n    }\n  }\n\n  toggleCaptions(): void {\n    const video = this.videoElement.nativeElement;\n    const textTracks = video.textTracks;\n\n    // Toggle the internal state\n    const newCaptionState = !this.showCaptions();\n    this.showCaptions.set(newCaptionState);\n\n    if (textTracks.length > 0) {\n      // Find caption or subtitle tracks\n      for (let i = 0; i < textTracks.length; i++) {\n        const track = textTracks[i];\n        if (track.kind === 'captions' || track.kind === 'subtitles') {\n          // Set track mode based on caption state\n          track.mode = newCaptionState ? 'showing' : 'hidden';\n        }\n      }\n    }\n\n    this.showControlsTemporarily();\n  }\n\n  toggleSettings(): void {\n    this.showSettingsMenu.set(!this.showSettingsMenu());\n    this.showControlsTemporarily();\n  }\n\n  closeSettings(): void {\n    this.showSettingsMenu.set(false);\n  }\n\n  setPlaybackSpeed(speed: number): void {\n    const video = this.videoElement.nativeElement;\n    video.playbackRate = speed;\n    this.playbackSpeed.set(speed);\n    this.showControlsTemporarily();\n  }\n\n  openSettingsPanel(panel: string): void {\n    this.currentSettingsPanel.set(panel);\n  }\n\n  closeSettingsPanel(): void {\n    this.currentSettingsPanel.set(null);\n  }\n\n  changeQuality(quality: string): void {\n    this.currentQuality.set(quality);\n  }\n\n  changeVideoSource(source: VideoSource): void {\n    const currentTime = this.videoElement.nativeElement.currentTime;\n    const wasPlaying = this.isPlaying();\n\n    // Change to the new source\n    this.currentSource.set(source);\n\n    // Preserve playback position and state\n    setTimeout(() => {\n      this.videoElement.nativeElement.currentTime = currentTime;\n      if (wasPlaying) {\n        this.videoElement.nativeElement.play();\n      }\n    }, 100);\n\n    this.closeSettings();\n    this.showControlsTemporarily();\n  }\n\n  getSpeedLabel(): string {\n    const speed = this.playbackSpeed();\n    return speed === 1 ? 'Normal' : `${speed}`;\n  }\n\n  getQualityLabel(): string {\n    const currentSource = this.currentSource();\n    if (currentSource && currentSource.label) {\n      return currentSource.label;\n    }\n    return 'Auto';\n  }\n\n  setSleepTimer(minutes: number | null): void {\n    // Clear existing timer\n    if (this.sleepTimerInstance) {\n      clearTimeout(this.sleepTimerInstance);\n      this.sleepTimerInstance = null;\n    }\n\n    if (minutes === null) {\n      this.sleepTimer.set(null);\n      this.sleepTimerActive.set(false);\n      return;\n    }\n\n    this.sleepTimer.set(minutes);\n    this.sleepTimerActive.set(true);\n\n    // Set timer to pause video after specified minutes\n    this.sleepTimerInstance = window.setTimeout(\n      () => {\n        if (this.isPlaying()) {\n          this.togglePlayPause();\n        }\n        this.sleepTimerActive.set(false);\n      },\n      minutes * 60 * 1000\n    );\n    this.showControlsTemporarily();\n  }\n\n  getSleepTimerLabel(): string {\n    if (!this.sleepTimerActive()) return 'Off';\n    const minutes = this.sleepTimer();\n    if (!minutes) return 'Off';\n\n    if (minutes < 60) {\n      return `${minutes} min`;\n    } else if (minutes === 60) {\n      return '1 hour';\n    } else if (minutes === 90) {\n      return '1.5 hours';\n    } else {\n      return `${minutes / 60} hours`;\n    }\n  }\n\n  toggleLoop(): void {\n    const newLoopState = !this.loopEnabled();\n\n    this.loopEnabled.set(newLoopState);\n\n    // Update the config to keep it in sync\n    const currentConfig = this.config();\n    this.config.set({ ...currentConfig, loop: newLoopState });\n\n    // Also update video element directly as backup\n    const video = this.videoElement.nativeElement;\n    video.loop = newLoopState;\n\n    // If enabling loop and video is at the end, restart immediately\n    if (newLoopState && video.ended) {\n      video.currentTime = 0;\n      const playPromise = video.play();\n      if (playPromise) {\n        playPromise\n          .then(() => {\n            this.isPlaying.set(true);\n          })\n          .catch(error => {\n            // Silently handle loop test failure\n          });\n      }\n    }\n    this.showControlsTemporarily();\n  }\n\n  togglePictureInPicture(): void {\n    const video = this.videoElement.nativeElement;\n    if (document.pictureInPictureElement) {\n      document.exitPictureInPicture();\n    } else if (video.requestPictureInPicture) {\n      video.requestPictureInPicture().catch(() => {\n        // Silently handle picture-in-picture failure\n      });\n    }\n    this.showControlsTemporarily();\n  }\n\n  // UI methods\n  onMouseEnter(): void {\n    this.showControlsTemporarily();\n  }\n\n  onMouseLeave(): void {\n    if (this.controlsTimer) {\n      clearTimeout(this.controlsTimer);\n    }\n    this.showControls.set(false);\n  }\n\n  private showControlsTemporarily(): void {\n    this.showControls.set(true);\n\n    if (this.controlsTimer) {\n      clearTimeout(this.controlsTimer);\n    }\n\n    this.controlsTimer = window.setTimeout(() => {\n      if (this.isPlaying()) {\n        this.showControls.set(false);\n      }\n    }, this.config().hideControlsDelay);\n  }\n\n  formatTime(seconds: number): string {\n    if (isNaN(seconds)) return '0:00';\n\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${secs.toString().padStart(2, '0')}`;\n  }\n\n  private emitEvent(type: string, data?: any): void {\n    this.playerEvent.emit({ type, data, timestamp: Date.now() });\n  }\n}\n","import { Injectable, signal, computed, inject, DestroyRef } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { BehaviorSubject, Observable, fromEvent, merge } from 'rxjs';\nimport { map, filter, shareReplay } from 'rxjs/operators';\nimport {\n  VideoPlayerState,\n  VideoPlayerAnalytics,\n  VideoPlayerEvent,\n  VideoSource,\n  VideoQuality,\n} from '../interfaces/video-player.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class VideoPlayerService {\n  private destroyRef = inject(DestroyRef);\n\n  // Analytics tracking\n  private analytics = signal<VideoPlayerAnalytics>({\n    playCount: 0,\n    totalWatchTime: 0,\n    averageWatchTime: 0,\n    completionRate: 0,\n    bufferingEvents: 0,\n    errorEvents: 0,\n    seekEvents: 0,\n    qualityChanges: 0,\n  });\n\n  // Global player instances tracking\n  private playerInstances = new Map<string, any>();\n  private activePlayer = signal<string | null>(null);\n\n  // Network and performance monitoring\n  private networkStatus = signal<'online' | 'offline'>('online');\n  private connectionSpeed = signal<'slow' | 'fast' | 'unknown'>('unknown');\n\n  // Picture-in-Picture support\n  private pipSupported = signal<boolean>(false);\n  private pipActive = signal<boolean>(false);\n\n  constructor() {\n    this.initializeNetworkMonitoring();\n    this.initializePictureInPictureSupport();\n  }\n\n  /**\n   * Register a video player instance\n   */\n  registerPlayer(id: string, playerRef: any): void {\n    this.playerInstances.set(id, playerRef);\n  }\n\n  /**\n   * Unregister a video player instance\n   */\n  unregisterPlayer(id: string): void {\n    this.playerInstances.delete(id);\n    if (this.activePlayer() === id) {\n      this.activePlayer.set(null);\n    }\n  }\n\n  /**\n   * Set the active player\n   */\n  setActivePlayer(id: string): void {\n    if (this.playerInstances.has(id)) {\n      this.activePlayer.set(id);\n    }\n  }\n\n  /**\n   * Get analytics data\n   */\n  getAnalytics(): VideoPlayerAnalytics {\n    return this.analytics();\n  }\n\n  /**\n   * Update analytics with new data\n   */\n  updateAnalytics(update: Partial<VideoPlayerAnalytics>): void {\n    this.analytics.update(current => ({ ...current, ...update }));\n  }\n\n  /**\n   * Track video event for analytics\n   */\n  trackEvent(event: VideoPlayerEvent, playerId?: string): void {\n    const currentAnalytics = this.analytics();\n\n    switch (event.type) {\n      case 'play':\n        this.analytics.update(a => ({\n          ...a,\n          playCount: a.playCount + 1,\n        }));\n        break;\n\n      case 'error':\n        this.analytics.update(a => ({\n          ...a,\n          errorEvents: a.errorEvents + 1,\n        }));\n        break;\n\n      case 'seek':\n        this.analytics.update(a => ({\n          ...a,\n          seekEvents: a.seekEvents + 1,\n        }));\n        break;\n\n      case 'bufferstart':\n        this.analytics.update(a => ({\n          ...a,\n          bufferingEvents: a.bufferingEvents + 1,\n        }));\n        break;\n\n      case 'qualitychange':\n        this.analytics.update(a => ({\n          ...a,\n          qualityChanges: a.qualityChanges + 1,\n        }));\n        break;\n    }\n  }\n\n  /**\n   * Get optimal video quality based on network conditions\n   */\n  getOptimalQuality(availableQualities: VideoQuality[]): VideoQuality | null {\n    if (availableQualities.length === 0) return null;\n\n    const connectionSpeed = this.connectionSpeed();\n    const networkStatus = this.networkStatus();\n\n    if (networkStatus === 'offline') {\n      return null;\n    }\n\n    // Sort qualities by height (resolution)\n    const sortedQualities = [...availableQualities].sort((a, b) => b.height - a.height);\n\n    switch (connectionSpeed) {\n      case 'slow':\n        // Return lowest quality for slow connections\n        return sortedQualities[sortedQualities.length - 1];\n\n      case 'fast':\n        // Return highest quality for fast connections\n        return sortedQualities[0];\n\n      default:\n        // Return medium quality or best available\n        const mediumIndex = Math.floor(sortedQualities.length / 2);\n        return sortedQualities[mediumIndex] || sortedQualities[0];\n    }\n  }\n\n  /**\n   * Generate adaptive streaming manifest\n   */\n  generateAdaptiveManifest(sources: VideoSource[]): string | null {\n    if (sources.length === 0) return null;\n\n    // Simple HLS-style manifest generation\n    const manifest = sources\n      .map(source => `#EXT-X-STREAM-INF:BANDWIDTH=1000000\\n${source.url}`)\n      .join('\\n');\n\n    return `#EXTM3U\\n#EXT-X-VERSION:3\\n${manifest}`;\n  }\n\n  /**\n   * Prefetch video segments for smoother playback\n   */\n  prefetchSegments(videoUrl: string, segmentCount: number = 3): Promise<void[]> {\n    const prefetchPromises: Promise<void>[] = [];\n\n    for (let i = 0; i < segmentCount; i++) {\n      const segmentUrl = `${videoUrl}?segment=${i}`;\n      const prefetchPromise = fetch(segmentUrl, {\n        method: 'HEAD',\n        cache: 'force-cache',\n      }).then(() => void 0);\n\n      prefetchPromises.push(prefetchPromise);\n    }\n\n    return Promise.all(prefetchPromises);\n  }\n\n  /**\n   * Picture-in-Picture support\n   */\n  isPictureInPictureSupported(): boolean {\n    return this.pipSupported();\n  }\n\n  isPictureInPictureActive(): boolean {\n    return this.pipActive();\n  }\n\n  async enterPictureInPicture(videoElement: HTMLVideoElement): Promise<void> {\n    if (!this.pipSupported()) {\n      throw new Error('Picture-in-Picture is not supported');\n    }\n\n    try {\n      await (videoElement as any).requestPictureInPicture();\n      this.pipActive.set(true);\n    } catch (error) {\n      console.error('Failed to enter Picture-in-Picture:', error);\n      throw error;\n    }\n  }\n\n  async exitPictureInPicture(): Promise<void> {\n    try {\n      await (document as any).exitPictureInPicture();\n      this.pipActive.set(false);\n    } catch (error) {\n      console.error('Failed to exit Picture-in-Picture:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Memory optimization utilities\n   */\n  cleanupUnusedResources(): void {\n    // Clean up inactive player instances\n    const activeId = this.activePlayer();\n    this.playerInstances.forEach((player, id) => {\n      if (id !== activeId && player.cleanup) {\n        player.cleanup();\n      }\n    });\n  }\n\n  /**\n   * Performance monitoring\n   */\n  measurePerformance<T>(operation: string, fn: () => T): T {\n    const startTime = performance.now();\n    const result = fn();\n    const endTime = performance.now();\n\n    console.log(`Performance: ${operation} took ${endTime - startTime} milliseconds`);\n    return result;\n  }\n\n  /**\n   * Detect if device supports hardware acceleration\n   */\n  detectHardwareAcceleration(): Promise<boolean> {\n    return new Promise(resolve => {\n      const canvas = document.createElement('canvas');\n      const gl =\n        (canvas.getContext('webgl') as WebGLRenderingContext | null) ||\n        (canvas.getContext('experimental-webgl') as WebGLRenderingContext | null);\n\n      if (!gl) {\n        resolve(false);\n        return;\n      }\n\n      const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n      if (debugInfo) {\n        const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) as string;\n        const isHardwareAccelerated =\n          !renderer.includes('SwiftShader') && !renderer.includes('Software');\n        resolve(isHardwareAccelerated);\n      } else {\n        resolve(true); // Assume hardware acceleration if we can't detect\n      }\n\n      canvas.remove();\n    });\n  }\n\n  private initializeNetworkMonitoring(): void {\n    // Monitor online/offline status\n    merge(\n      fromEvent(window, 'online').pipe(map(() => 'online' as const)),\n      fromEvent(window, 'offline').pipe(map(() => 'offline' as const))\n    )\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe(status => {\n        this.networkStatus.set(status);\n      });\n\n    // Estimate connection speed\n    if ('connection' in navigator) {\n      const connection = (navigator as any).connection;\n      if (connection) {\n        const updateConnectionSpeed = () => {\n          const effectiveType = connection.effectiveType;\n          if (effectiveType === '4g') {\n            this.connectionSpeed.set('fast');\n          } else if (effectiveType === '3g' || effectiveType === '2g') {\n            this.connectionSpeed.set('slow');\n          } else {\n            this.connectionSpeed.set('unknown');\n          }\n        };\n\n        updateConnectionSpeed();\n        connection.addEventListener('change', updateConnectionSpeed);\n      }\n    }\n  }\n\n  private initializePictureInPictureSupport(): void {\n    this.pipSupported.set('pictureInPictureEnabled' in document);\n\n    if (this.pipSupported()) {\n      fromEvent(document, 'enterpictureinpicture')\n        .pipe(takeUntilDestroyed(this.destroyRef))\n        .subscribe(() => this.pipActive.set(true));\n\n      fromEvent(document, 'leavepictureinpicture')\n        .pipe(takeUntilDestroyed(this.destroyRef))\n        .subscribe(() => this.pipActive.set(false));\n    }\n  }\n}\n","/*\n * Public API Surface of rm-ng-video-player\n */\n\n// Main component\nexport * from './lib/rm-ng-video-player';\n\n// Interfaces\nexport * from './lib/interfaces/video-player.interface';\n\n// Services\nexport * from './lib/services/video-player.service';\n\n// Components\nexport * from './lib/components/video-progress/video-progress.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}